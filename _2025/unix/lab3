


#########################=-> права доступа <-=########################


# r w x
# 4 2 1

# suid sgid sticky_bit
#  4     2      1

# (bits)(uao) 0000



ладелец-пользователь может не являться членом группы, владеющей файлом.


Идентификатор владельца-пользователя файла (UID) устанавливается равным EUIDпроцесса,
создающего файл.



Order:

1) if super user --> ok
2) if owner user
3) if owner group user
4) if other



#####=-> file <-=#####

r -- просмотреть содержимое файла
w -- изменить файл 
x -- исполнить файл


Для выполнения скрипта -- rx


t (Sticky bit, save text mode) -- Сохранить образ выполняемого файла в памяти после
завершения выполнения. После завершения выполнения задачи ее образ (т. е. код
и данные) оставались в памяти, поэтому последующие запуски этой про
граммы занимали значительно меньше времени.

S (Set UID, SUID) -- Установить UID процесса при выполнении.
S (Set GID, SGID) -- Установить GID процесса при выполнении.

Атрибуты (или флаги) SUID и SGID позволяют изменить права пользова�
теля при запуске на выполнение файла, имеющего эти атрибуты. При
этом привилегии будут изменены (обычно расширены) лишь на время вы�
полнения и только в отношении этой программы.

Example: passwd (может ркдактировать /etc/passwd хотя любой пользователь может выполнить эту команду).


1 (блокирование) -- Установить обязательное блокирование файла.
Блокирование файлов позволяет устранить возможность конфликта, когда
две или более задачи одновременно работают с одним и тем же файлом.



#####=-> directory <-=#####

r -- вывести список содержащихся в каталоге подкаталогов и файлов
w -- добавить или удалить файлы
x -- работа с известным файлом внутри каталога

only w and --- --> can move -w- directory, but can't move ---.


t (Sticky bit) -- Позволяет пользователю удалять только файлы, кото рыми он владеет или имеет права на запись.
При обсуждении прав доступа отмечалось, что предоставление права на
запись в каталог дает достаточно большие полномочия. Имея такое право,
пользователь может удалить из каталога любой файл, даже тот, владельцем
которого он не является и в отношении которого не имеет никаких прав.
Установка атрибута Sticky bit для каталога позволяет установить дополни�
тельную защиту файлов, находящихся в каталоге. Из такого каталога поль�
зователь может удалить только файлы, которыми он владеет, или на кото�
рые он имеет явное право доступа на запись, даже при наличии права на
запись в каталог.

Example: /tmp


S (Set GID, SGID) -- Позволяет изменить правило установки владельца группы создаваемых файлов, аналогично реализован
ному в BSD UNIX.

При установке этого атрибута для каталога вновь созданные файлы этого каталога будут наследовать владельца-группу по
владельцу-группе каталога.



#####=-> commands <-=#####

chmod

# change owner
chown [-ключи] новый_пользователь:[новая группа] файл

# change group-owner
chgrp [-ключи] новая_группа имя_файла 



#####=-> masks <-=#####

umask -- изменение шаблона прав доступа для новых файлов и каталогов


Стандартный код системы -- 0666.
Стандартный umask -- 0022.


111
010 (NOT)

111 AND
101
------
101



#####=-> Списки контроля доступа <-=#####

getfacl -- Просмотр списка контроля доступа для файла или каталога 
setfacl -- Установка списка контроля доступа для файла или каталога 


Списки контроля доступа используются для выдачи доступа к файлу дополнительным 
группам и пользователям, если функционала стандартного разграничения прав доступа к 
файлу оказывается недостаточно. 


setfacl -m g:developers:rw file1.txt
etfacl -m g:physics:rw,u:petr:rw,u:ivan:r file1.txt 


user:: -- стандартные права доступа для 
пользователя-владельца файла 

user: -- права доступа для 
дополнительных пользователей 

group:: -- стандартные права доступа для 
группа-владельцев файла 

group: -- права доступа для 
дополнительных групп 

other:: -- права доступа для любого 
пользователя, который не входит 
ни в одну из вышеназванных 
категорий

mask:: -- максимально возможные права 
доступа, разрешенные для 
дополнительных пользователей и 
любой группы 

Все записи кроме маски должны быть заданы.
